has_ratings
===========

Instalation
-----------

1) Install the plugin with `script/plugin install git://github.com/fnando/has_ratings.git`
2) Generate a migration with `script/generate migration create_ratings` and add the following code:

class CreateRatings < ActiveRecord::Migration
  def self.up
    create_table :ratings do |t|
      t.integer :rating, :default => 0, :null => false
      t.references :rateable, :polymorphic => true
      t.references :user
      t.timestamps
    end
    
    add_index :ratings, :rateable_type
    add_index :ratings, :rateable_id
    add_index :ratings, :user_id
  end

  def self.down
    drop_table :ratings
  end
end

3) Run the migrations with `rake db:migrate`

Usage
=====
1) Add the method call `has_rating` to your model.

class Photo < ActiveRecord::Base
  has_ratings
end

2) Add this association on your User model:

class User < ActiveRecord::Base
  has_many :ratings
end

photo = Photo.find(:first)
user = User.find(:first)

photo.rate(:user => user, :rating => 1) # => <rating>
photo.rated?(user) # => true
photo.ratings # => [<rating>]
photo.rating_average # => 0.0
photo.find_users_that_rated # => []
photo.find_rating_by_user(user) # => <rating>

NOTE: You should have a User model. Otherwise, this won't work! And only 1 vote per object. 
And, rating goes from 1 to 5.

Copyright (c) 2008 Nando Vieira, released under the MIT license